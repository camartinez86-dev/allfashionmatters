<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Mission Control</title>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
<style>
:root{--bg:#0d0d12;--bg2:#16161f;--bg3:#1e1e2a;--bg4:#262635;--purple:#a855f7;--orange:#f97316;--green:#10b981;--blue:#3b82f6;--red:#ef4444;--txt:#fff;--txt2:#9ca3af;--txt3:#6b7280;--bdr:#2a2a3a}
*{box-sizing:border-box;margin:0;padding:0}
body{font-family:Inter,sans-serif;background:var(--bg);color:var(--txt);min-height:100vh}
.dash{display:grid;grid-template-columns:220px 1fr;height:100vh}
.sidebar{background:var(--bg2);border-right:1px solid var(--bdr);padding:16px 0;display:flex;flex-direction:column;overflow-y:auto}
.logo{padding:12px 16px 20px;font-size:1.1rem;font-weight:700;display:flex;align-items:center;gap:10px}
.logo span{font-size:1.2rem}
.nav_item{display:flex;align-items:center;gap:12px;padding:10px 16px;color:var(--txt2);cursor:pointer;transition:all .15s;border-left:3px solid transparent;font-size:0.9rem}
.nav_item:hover{background:rgba(168,85,247,0.1);color:var(--txt)}
.nav_item.active{background:rgba(168,85,247,0.15);color:var(--purple);border-left-color:var(--purple)}
.nav_item .ic{width:18px;text-align:center}
.section{margin:16px 0}
.sec_title{padding:8px 16px;font-size:0.65rem;text-transform:uppercase;color:var(--txt3);letter-spacing:1px;font-weight:600}
.main{background:var(--bg);overflow-y:auto}
.header{padding:16px 24px;border-bottom:1px solid var(--bdr);display:flex;justify-content:space-between;align-items:center}
.search{display:flex;align-items:center;background:var(--bg3);border:1px solid var(--bdr);border-radius:8px;padding:8px 14px;gap:8px}
.search input{background:none;border:none;outline:none;color:var(--txt);font-size:0.85rem;width:200px}
.header_btns{display:flex;gap:8px}
.btn{padding:8px 16px;border:none;border-radius:6px;font-size:0.8rem;font-weight:600;cursor:pointer;transition:all .15s}
.btn_purple{background:var(--purple);color:#fff}
.btn_purple:hover{background:#9333ea}
.btn_gray{background:var(--bg3);color:var(--txt2);border:1px solid var(--bdr)}
.btn_gray:hover{background:var(--bg4)}
.btn_green{background:var(--green);color:#fff}
.content{padding:20px 24px}
.stats_row{display:flex;gap:16px;margin-bottom:20px;flex-wrap:wrap}
.stat{background:var(--bg2);border:1px solid var(--bdr);border-radius:10px;padding:16px 20px;min-width:140px;flex:1}
.stat_t{font-size:0.75rem;color:var(--txt3);margin-bottom:4px}
.stat_v{font-size:1.5rem;font-weight:700;font-family:JetBrains Mono}
.stat_v.green{color:var(--green)}
.stat_v.orange{color:var(--orange)}
.stat_v.red{color:var(--red)}
.stat_v.purple{color:var(--purple)}
.grid2{display:grid;grid-template-columns:repeat(2,1fr);gap:20px;margin-bottom:20px}
.card{background:var(--bg2);border:1px solid var(--bdr);border-radius:10px;padding:20px;margin-bottom:20px}
.card_h{display:flex;justify-content:space-between;align-items:center;margin-bottom:16px}
.card_t{font-size:1rem;font-weight:600}
.table{width:100%;border-collapse:collapse}
.table th,.table td{padding:12px;text-align:left;border-bottom:1px solid var(--bdr);font-size:0.85rem}
.table th{color:var(--txt3);font-weight:500;font-size:0.75rem;text-transform:uppercase}
.table td{font-family:JetBrains Mono;font-size:0.8rem}
.table tr:hover{background:var(--bg3)}
.tag{display:inline-block;padding:3px 10px;border-radius:12px;font-size:0.65rem;font-weight:600}
.tag_green{background:rgba(16,185,129,0.2);color:var(--green)}
.tag_purple{background:rgba(168,85,247,0.2);color:var(--purple)}
.tag_blue{background:rgba(59,130,246,0.2);color:var(--blue)}
.tag_orange{background:rgba(249,115,22,0.2);color:var(--orange)}
.filters{display:flex;gap:10px;margin-bottom:16px;flex-wrap:wrap}
.filter{background:var(--bg3);border:1px solid var(--bdr);border-radius:6px;padding:6px 12px;color:var(--txt2);font-size:0.8rem;cursor:pointer}
.filter.active{background:var(--purple);color:#fff;border-color:var(--purple)}
.chart_wrap{height:250px;position:relative}
.modal{display:none;position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,0.8);z-index:100;align-items:center;justify-content:center}
.modal.on{display:flex}
.modal_c{background:var(--bg2);border:1px solid var(--bdr);border-radius:12px;padding:24px;width:380px}
.modal_h{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px}
.modal_t{font-size:1.1rem;font-weight:600}
.modal_x{background:none;border:none;color:var(--txt3);font-size:1.5rem;cursor:pointer}
.fg{margin-bottom:14px}
.fg label{display:block;font-size:0.8rem;color:var(--txt2);margin-bottom:6px}
.fg input,.fg select{width:100%;padding:10px 12px;background:var(--bg3);border:1px solid var(--bdr);border-radius:6px;color:var(--txt);font-size:0.9rem}
.fg input:focus,.fg select:focus{outline:none;border-color:var(--purple)}
.panel{display:none}
.panel.active{display:block}
.empty{color:var(--txt3);text-align:center;padding:40px;font-size:0.9rem}
.time_period{display:flex;gap:8px}
.time_btn{padding:6px 14px;background:var(--bg3);border:1px solid var(--bdr);border-radius:6px;color:var(--txt2);font-size:0.75rem;cursor:pointer}
.time_btn.active{background:var(--purple);color:#fff;border-color:var(--purple)}
@media(max-width:900px){.grid2{grid-template-columns:1fr}.dash{grid-template-columns:180px 1fr}}
@media(max-width:600px){.dash{grid-template-columns:1fr}.sidebar{display:none}}
</style>
</head>
<body>
<div class="dash">
<aside class="sidebar">
<div class="logo"><span>üöÄ</span> Mission Control</div>
<div class="section">
<div class="sec_title">Main</div>
<div class="nav_item" data-p="overview"><span class="ic">üìä</span> Overview</div>
<div class="nav_item" data-p="calendar"><span class="ic">üìÖ</span> Calendar</div>
<div class="nav_item" data-p="tasks"><span class="ic">‚úì</span> Tasks</div>
<div class="nav_item" data-p="docs"><span class="ic">üìÑ</span> Docs</div>
</div>
<div class="section">
<div class="sec_title">System</div>
<div class="nav_item" data-p="usage"><span class="ic">üí∞</span> Model Usage</div>
<div class="nav_item" data-p="memory"><span class="ic">üß†</span> Memory</div>
<div class="nav_item" data-p="skills"><span class="ic">‚ö°</span> Skills</div>
<div class="nav_item" data-p="cron"><span class="ic">‚è∞</span> Cron Jobs</div>
</div>
<div style="margin-top:auto;padding:16px">
<div class="nav_item"><span class="ic">üë§</span> User</div>
</div>
</aside>
<main class="main">
<div class="header">
<div style="font-weight:600">Mission Control</div>
<div class="header_btns">
<button class="btn btn_purple" onclick="openModal('log')">+ Log Call</button>
</div>
</div>
<div class="content">
<!-- Overview Panel -->
<div class="panel active" id="panel-overview">
<div class="stats_row">
<div class="stat"><div class="stat_t">Today</div><div class="stat_v green" id="costToday">$0.00</div></div>
<div class="stat"><div class="stat_t">This Week</div><div class="stat_v" id="costWeek">$0.00</div></div>
<div class="stat"><div class="stat_t">This Month</div><div class="stat_v" id="costMonth">$0.00</div></div>
<div class="stat"><div class="stat_t">Total Calls</div><div class="stat_v purple" id="totalCalls">0</div></div>
</div>
<div class="grid2">
<div class="card">
<div class="card_h"><div class="card_t">Cost Over Time</div></div>
<div class="chart_wrap"><canvas id="costChart"></canvas></div>
</div>
<div class="card">
<div class="card_h"><div class="card_t">By Model</div></div>
<div class="chart_wrap"><canvas id="modelChart"></canvas></div>
</div>
</div>
<div class="card">
<div class="card_h"><div class="card_t">Recent Calls</div></div>
<table class="table"><thead><tr><th>Time</th><th>Model</th><th>Tokens</th><th>Cost</th></tr></thead><tbody id="recentTable"></tbody></table>
</div>
</div>
<!-- Calendar Panel -->
<div class="panel" id="panel-calendar">
<div class="stats_row">
<div class="stat"><div class="stat_t">Events</div><div class="stat_v purple" id="eventCount">0</div></div>
</div>
<button class="btn btn_purple" style="margin-bottom:16px" onclick="openModal('event')">+ Add Event</button>
<div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:16px">
<h2 style="font-size:1.2rem" id="calTitle">February 2026</h2>
<div style="display:flex;gap:8px"><button class="btn btn_gray" onclick="changeMonth(-1)">‚Üê</button><button class="btn btn_gray" onclick="changeMonth(1)">‚Üí</button></div>
</div>
<div style="display:grid;grid-template-columns:repeat(7,1fr);gap:8px;margin-bottom:24px" id="calendarGrid"></div>
</div>
<!-- Tasks Panel -->
<div class="panel" id="panel-tasks">
<div class="stats_row">
<div class="stat"><div class="stat_t">Total</div><div class="stat_v" id="taskCount">0</div></div>
<div class="stat"><div class="stat_t">Active</div><div class="stat_v green" id="activeCount">0</div></div>
</div>
<button class="btn btn_purple" style="margin-bottom:16px" onclick="openModal('task')">+ Add Task</button>
<div class="card">
<table class="table"><thead><tr><th>Task</th><th>Due</th><th>Priority</th><th>Status</th></tr></thead><tbody id="taskTable"></tbody></table>
</div>
</div>
<!-- Docs Panel -->
<div class="panel" id="panel-docs">
<div class="stats_row">
<div class="stat"><div class="stat_t">Docs</div><div class="stat_v">4</div></div>
</div>
<div class="card">
<div style="padding:10px 12px;background:var(--bg3);border-radius:8px;margin-bottom:8px;cursor:pointer">üìã AGENTS.md</div>
<div style="padding:10px 12px;background:var(--bg3);border-radius:8px;margin-bottom:8px;cursor:pointer">üë§ USER.md</div>
<div style="padding:10px 12px;background:var(--bg3);border-radius:8px;margin-bottom:8px;cursor:pointer">üß† MEMORY.md</div>
<div style="padding:10px 12px;background:var(--bg3);border-radius:8px;cursor:pointer">‚ö° SOUL.md</div>
</div>
</div>
<!-- Usage Panel -->
<div class="panel" id="panel-usage">
<div class="stats_row">
<div class="stat"><div class="stat_t">Today</div><div class="stat_v green" id="uToday">$0.00</div></div>
<div class="stat"><div class="stat_t">Week</div><div class="stat_v" id="uWeek">$0.00</div></div>
<div class="stat"><div class="stat_t">Month</div><div class="stat_v" id="uMonth">$0.00</div></div>
</div>
<div class="filters">
<button class="filter active" data-f="all">All</button>
<button class="filter" data-f="chat">Chat</button>
<button class="filter" data-f="coding">Coding</button>
<button class="filter" data-f="research">Research</button>
</div>
<div class="grid2">
<div class="card">
<div class="card_h"><div class="card_t">Cost by Model</div></div>
<div class="chart_wrap"><canvas id="usageModelChart"></canvas></div>
</div>
<div class="card">
<div class="card_h"><div class="card_t">Cost by Task Type</div></div>
<div class="chart_wrap"><canvas id="usageTypeChart"></canvas></div>
</div>
</div>
<div class="card">
<div class="card_h"><div class="card_t">All Calls</div><div class="time_period"><button class="time_btn active" data-p="day">Day</button><button class="time_btn" data-p="week">Week</button><button class="time_btn" data-p="month">Month</button></div></div>
<table class="table"><thead><tr><th>Date</th><th>Model</th><th>Task</th><th>In</th><th>Out</th><th>Cost</th></tr></thead><tbody id="usageTable"></tbody></table>
</div>
</div>
<!-- Memory Panel -->
<div class="panel" id="panel-memory">
<div class="card" style="background:linear-gradient(135deg,rgba(168,85,247,0.2),rgba(59,130,246,0.2));border-color:var(--purple)">
<div style="font-size:1.1rem;font-weight:600;margin-bottom:8px">üß† QMD Memory Backend</div>
<div style="color:var(--txt2);font-size:0.85rem">BM25 + vectors + reranking enabled</div>
</div>
<div class="stats_row">
<div class="stat"><div class="stat_t">Backend</div><div class="stat_v" style="font-size:1rem">QMD</div></div>
<div class="stat"><div class="stat_t">Session Memory</div><div class="stat_v green" style="font-size:1rem">Active</div></div>
</div>
</div>
<!-- Skills Panel -->
<div class="panel" id="panel-skills">
<div class="stats_row"><div class="stat"><div class="stat_t">Skills</div><div class="stat_v">6</div></div></div>
<div class="card">
<div style="padding:10px;background:var(--bg3);border-radius:8px;margin-bottom:8px">ü§ñ github</div>
<div style="padding:10px;background:var(--bg3);border-radius:8px;margin-bottom:8px">üå¶Ô∏è weather</div>
<div style="padding:10px;background:var(--bg3);border-radius:8px;margin-bottom:8px">üíª coding-agent</div>
<div style="padding:10px;background:var(--bg3);border-radius:8px">üõ†Ô∏è self-evolve</div>
</div>
</div>
<!-- Cron Panel -->
<div class="panel" id="panel-cron">
<div class="stats_row"><div class="stat"><div class="stat_t">Active Jobs</div><div class="stat_v">3</div></div></div>
<div class="card">
<table class="table"><thead><tr><th>Job</th><th>Schedule</th><th>Status</th></tr></thead><tbody>
<tr><td>Morning Report</td><td>7 AM daily</td><td><span class="tag tag_green">Active</span></td></tr>
<tr><td>Content Researcher</td><td>9 AM daily</td><td><span class="tag tag_green">Active</span></td></tr>
<tr><td>Website Audit</td><td>Daily</td><td><span class="tag tag_green">Active</span></td></tr>
</tbody></table>
</div>
</div>
</div>
</main>
</div>
<!-- Modals -->
<div class="modal" id="modal-log">
<div class="modal_c">
<div class="modal_h"><div class="modal_t">Log API Call</div><button class="modal_x" onclick="closeModal('log')">√ó</button></div>
<div class="fg"><label>Model</label><select id="logModel"><option value="MiniMax-M2.1">MiniMax M2.1</option><option value="MiniMax-M2.5">MiniMax M2.5</option><option value="GPT-4.1">GPT-4.1</option><option value="GPT-5-Mini">GPT-5 Mini</option><option value="GPT-5.1-Codex">GPT-5.1 Codex</option></select></div>
<div class="fg"><label>Task Type</label><select id="logType"><option value="chat">Chat</option><option value="coding">Coding</option><option value="research">Research</option><option value="other">Other</option></select></div>
<div class="fg"><label>Input Tokens</label><input type="number" id="logIn" placeholder="0"></div>
<div class="fg"><label>Output Tokens</label><input type="number" id="logOut" placeholder="0"></div>
<button class="btn btn_purple" style="width:100%" onclick="addLog()">Log Call</button>
</div>
</div>
<div class="modal" id="modal-event">
<div class="modal_c">
<div class="modal_h"><div class="modal_t">Add Event</div><button class="modal_x" onclick="closeModal('event')">√ó</button></div>
<div class="fg"><label>Event Title</label><input type="text" id="eventTitle" placeholder="Event name"></div>
<div class="fg"><label>Date</label><input type="date" id="eventDate"></div>
<div class="fg"><label>Time</label><input type="time" id="eventTime"></div>
<div class="fg"><label>Color</label><select id="eventColor"><option value="purple">Purple</option><option value="orange">Orange</option><option value="green">Green</option><option value="blue">Blue</option><option value="red">Red</option></select></div>
<button class="btn btn_purple" style="width:100%" onclick="addEvent()">Add</button>
</div>
</div>
<div class="modal" id="modal-task">
<div class="modal_c">
<div class="modal_h"><div class="modal_t">Add Task</div><button class="modal_x" onclick="closeModal('task')">√ó</button></div>
<div class="fg"><label>Task</label><input type="text" id="taskTitle" placeholder="Task name"></div>
<div class="fg"><label>Due Date</label><input type="date" id="taskDue"></div>
<div class="fg"><label>Priority</label><select id="taskPriority"><option value="green">Low</option><option value="orange">Medium</option><option value="red">High</option></select></div>
<button class="btn btn_purple" style="width:100%" onclick="addTask()">Add</button>
</div>
</div>
<script>
// Pricing per 1M tokens
const PRICING={'MiniMax-M2.1':{in:0.2,out:0.2},'MiniMax-M2.5':{in:0.4,out:0.4},'GPT-4.1':{in:2,out:8},'GPT-5-Mini':{in:0.6,out:2.4},'GPT-5.1-Codex':{in:10,out:40}};
const DEFAULT_PRICING={in:1,out:1};
// Data
let logs=JSON.parse(localStorage.getItem('modelLogs')||'[]');
let events=JSON.parse(localStorage.getItem('mcevents')||'[]');
let tasks=JSON.parse(localStorage.getItem('mctasks')||'[]');
let currentFilter='all';
let currentMonth=new Date();
let costChart,modelChart,usageModelChart,usageTypeChart;
function save(){localStorage.setItem('modelLogs',JSON.stringify(logs));localStorage.setItem('mcevents',JSON.stringify(events));localStorage.setItem('mctasks',JSON.stringify(tasks))}
function cost(l){const p=PRICING[l.model]||DEFAULT_PRICING;return((l.input*p.in)+(l.output*p.out))/1e6}
function fmt(n){return'$'+n.toFixed(4)}
function now(){return new Date()}
function todayStr(){return now().toISOString().split('T')[0]}
function weekAgo(){return new Date(now().getTime()-7*24*60*60*1000).toISOString().split('T')[0]}
function monthAgo(){return new Date(now().getTime()-30*24*60*60*1000).toISOString().split('T')[0]}
function renderStats(){const t=costLogs(logs);const w=costLogs(logs.filter(l=>l.date>=weekAgo()));const m=costLogs(logs.filter(l=>l.date>=monthAgo()));document.getElementById('costToday').innerText=fmt(t);document.getElementById('costWeek').innerText=fmt(w);document.getElementById('costMonth').innerText=fmt(m);document.getElementById('totalCalls').innerText=logs.length;document.getElementById('uToday').innerText=fmt(t);document.getElementById('uWeek').innerText=fmt(w);document.getElementById('uMonth').innerText=fmt(m)}
function costLogs(arr){return arr.reduce((s,l)=>s+cost(l),0)}
function renderCharts(){const days=[];const dayCosts=[];for(let i=6;i>=0;i--){const d=new Date(now().getTime()-i*24*60*60*1000);const ds=d.toISOString().split('T')[0];days.push(d.toLocaleDateString('en',{weekday:'short'}));dayCosts.push(fmt(costLogs(logs.filter(l=>l.date===ds))))}
if(costChart)costChart.destroy();costChart=new Chart(document.getElementById('costChart'),{type:'line',data:{labels:days,datasets:[{label:'Cost',data:dayCosts,borderColor:'#a855f7',backgroundColor:'rgba(168,85,247,0.1)',fill:true,tension:0.4}]},options:{responsive:true,maintainAspectRatio:false,plugins:{legend:{display:false}},scales:{x:{grid:{color:'#2a2a3a'}},y:{grid:{color:'#2a2a3a'}}}}}});
const modelCosts={};logs.forEach(l=>{modelCosts[l.model]=(modelCosts[l.model]||0)+cost(l)});const models=Object.keys(modelCosts);const mData=models.map(m=>modelCosts[m]);if(modelChart)modelChart.destroy();modelChart=new Chart(document.getElementById('modelChart'),{type:'doughnut',data:{labels:models,datasets:[{data:mData,backgroundColors:['#a855f7','#3b82f6','#10b981','#f97316','#ef4444']}]},options:{responsive:true,maintainAspectRatio:false,plugins:{legend:{position:'right',labels:{color:'#fff'}}}}}});
renderUsageCharts();renderTable()}
function renderUsageCharts(){const filtered=currentFilter==='all'?logs:logs.filter(l=>l.type===currentFilter);const mc={},tc={};filtered.forEach(l=>{mc[l.model]=(mc[l.model]||0)+cost(l);tc[l.type]=(tc[l.type]||0)+cost(l)});
if(usageModelChart)usageModelChart.destroy();usageModelChart=new Chart(document.getElementById('usageModelChart'),{type:'pie',data:{labels:Object.keys(mc),datasets:[{data:Object.values(mc),backgroundColors:['#a855f7','#3b82f6','#10b981','#f97316','#ef4444']}]},options:{responsive:true,maintainAspectRatio:false,plugins:{legend:{position:'bottom',labels:{color:'#fff'}}}}});
if(usageTypeChart)usageTypeChart.destroy();usageTypeChart=new Chart(document.getElementById('usageTypeChart'),{type:'bar',data:{labels:Object.keys(tc),datasets:[{label:'Cost',data:Object.values(tc).map(v=>+v.toFixed(4)),backgroundColor:['#a855f7','#3b82f6','#10b981','#f97316']}]},options:{responsive:true,maintainAspectRatio:false,plugins:{legend:{display:false}},scales:{x:{grid:{color:'#2a2a3a'}},y:{grid:{color:'#2a2a3a'}}}}})}
function renderTable(){const filtered=currentFilter==='all'?logs:logs.filter(l=>l.type===currentFilter);const sorted=[...filtered].sort((a,b)=>new Date(b.date+'T'+b.time)-new Date(a.date+'T'+a.time)).slice(0,20);let html='';if(sorted.length===0)html='<tr><td colspan="4" style="text-align:center;color:#6b7280">No logs yet</td></tr>';else sorted.forEach(l=>{html+=`<tr><td>${l.date} ${l.time}</td><td>${l.model}</td><td>${l.input+l.output}</td><td style="color:#10b981">${fmt(cost(l))}</td></tr>`});document.getElementById('recentTable').innerHTML=html;document.getElementById('usageTable').innerHTML=html}
function addLog(){const m=document.getElementById('logModel').value,t=document.getElementById('logType').value,inc=parseInt(document.getElementById('logIn').value)||0,outc=parseInt(document.getElementById('logOut').value)||0;logs.push({model:m,type:t,input:inc,output:outc,date:todayStr(),time:now().toTimeString().slice(0,5)});save();closeModal('log');renderStats();renderCharts();document.getElementById('logIn').value='';document.getElementById('logOut').value=''}
function renderCal(){const m=currentMonth.getMonth(),y=currentMonth.getFullYear();document.getElementById('calTitle').innerText=currentMonth.toLocaleString('default',{month:'long',year:'numeric'});const fd=new Date(y,m,1).getDay(),days=new Date(y,m+1,0).getDate(),today=new Date();let html='';['SUN','MON','TUE','WED','THU','FRI','SAT'].forEach(d=>html+=`<div style="text-align:center;font-size:0.7rem;color:#6b7280;padding:8px 0">${d}</div>`);for(let i=0;i<fd;i++)html+='<div></div>';for(let d=1;d<=days;d++){const isToday=today.getDate()===d&&today.getMonth()===m&&today.getFullYear()===y;const ds=`${y}-${String(m+1).padStart(2,'0')}-${String(d).padStart(2,'0')}`;const ev=events.filter(e=>e.date===ds);let evHtml='';ev.forEach(e=>{evHtml+=`<div style="background:rgba(${e.color==='purple'?'168,85,247':e.color==='orange'?'249,115,22':e.color==='green'?'16,185,129':e.color==='blue'?'59,130,246':'239,68,68'},0.3);padding:2px 6px;border-radius:4px;font-size:0.65rem;margin:2px 0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis">${e.title}</div>`});html+=`<div style="background:#1e1e2a;border:1px solid #2a2a3a;border-radius:8px;padding:8px;min-height:80px${isToday?';border-color:#3b82f6':''}"><div style="font-weight:600;margin-bottom:4px${isToday?';color:#3b82f6':''}">${d}</div>${evHtml}</div>`}document.getElementById('calendarGrid').innerHTML=html;document.getElementById('eventCount').innerText=events.length}
function changeMonth(d){currentMonth.setMonth(currentMonth.getMonth()+d);renderCal()}
function addEvent(){const t=document.getElementById('eventTitle').value,d=document.getElementById('eventDate').value,ti=document.getElementById('eventTime').value,c=document.getElementById('eventColor').value;if(!t||!d)return;events.push({title:t,date:d,time:ti,color:c});save();closeModal('event');renderCal();document.getElementById('eventTitle').value=''}
function renderTasks(){document.getElementById('taskCount').innerText=tasks.length;document.getElementById('activeCount').innerText=tasks.filter(t=>!t.done).length;let html='';if(tasks.length===0)html='<tr><td colspan="4" style="text-align:center;color:#6b7280">No tasks</td></tr>';else tasks.forEach((t,i)=>{html+=`<tr><td>${t.title}</td><td>${t.due||'-'}</td><td><span class="tag tag_${t.priority}">${t.priority}</span></td><td><button onclick="toggleTask(${i})" style="background:${t.done?'#10b981':'#3b82f6'};border:none;color:#fff;padding:4px 10px;border-radius:4px;cursor:pointer">${t.done?'‚úì':'‚óã'}</button></td></tr>`});document.getElementById('taskTable').innerHTML=html}
function addTask(){const t=document.getElementById('taskTitle').value,d=document.getElementById('taskDue').value,p=document.getElementById('taskPriority').value;if(!t)return;tasks.push({title:t,due:d,priority:p,done:false});save();closeModal('task');renderTasks();document.getElementById('taskTitle').value=''}
function toggleTask(i){tasks[i].done=!tasks[i].done;save();renderTasks()}
function openModal(m){document.getElementById('modal-'+m).classList.add('on')}
function closeModal(m){document.getElementById('modal-'+m).classList.remove('on')}
document.querySelectorAll('.nav_item').forEach(i=>{i.addEventListener('click',function(){document.querySelectorAll('.nav_item').forEach(n=>n.classList.remove('active'));this.classList.add('active');document.querySelectorAll('.panel').forEach(p=>p.classList.remove('active'));document.getElementById('panel-'+this.dataset.p).classList.add('active')})});
document.querySelectorAll('.filter').forEach(b=>{b.addEventListener('click',function(){document.querySelectorAll('.filter').forEach(f=>f.classList.remove('active'));this.classList.add('active');currentFilter=this.dataset.f;renderUsageCharts();renderTable()})});
renderStats();renderCharts();renderCal();renderTasks();
</script>
</body>
</html>
